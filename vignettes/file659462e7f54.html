<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="This vignette describes how to create sample datasets fitting the user's preferences, and needs. 
">
<title>Sample datasets • PINstimation</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><link href="../deps/Open_Sans-0.4.5/font.css" rel="stylesheet">
<link href="../deps/IBM_Plex_Mono-0.4.5/font.css" rel="stylesheet">
<link href="../deps/Roboto_Slab-0.4.5/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Sample datasets">
<meta property="og:description" content="This vignette describes how to create sample datasets fitting the user's preferences, and needs. 
">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-0SVLS0LDBY">
</script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-0SVLS0LDBY');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">PINstimation</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.1.2.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/PINstimation.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../research.html" aria-label="Research">Research</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/parallel_processing.html">Parallel Processing</a>
    <a class="dropdown-item" href="../articles/sample_datasets.html">Sample datasets</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../package-authors.html" aria-label="Authors">Authors</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/monty-se/">
    <span class="fa fa-github"></span>
     
    Github
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Sample datasets</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/monty-se/PINstimation/blob/HEAD/vignettes/sample_datasets.rmd" class="external-link"><code>vignettes/sample_datasets.rmd</code></a></small>
      <div class="d-none name"><code>sample_datasets.rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<hr>
<p>This vignette describes various scenarios of creating sample datasets
that fit the preferences and needs of the users; and this for the
different models. The functions in the package PINstimation use two
types of datasets: (1) A sequence of daily buys and sells (2) A
high-frequency trading data. This is the reason why only two sample
datasets are preloaded with the package, namely
<code>dailytrades</code>, and <code>hfdata</code>. The users can also
generate simulation data using the function
<code><a href="../reference/generatedata_mpin.html">generatedata_mpin()</a></code> for PIN, and MPIN models; and the
function <code><a href="../reference/generatedata_adjpin.html">generatedata_adjpin()</a></code> for the ADJPIN model. Below
we provide some scenarios of creating sample datasets both for the PIN,
MPIN, and ADJPIN models.</p>
</div>
<div class="section level2">
<h2 id="sample-datasets-for-the-pin-model">Sample datasets for the PIN model<a class="anchor" aria-label="anchor" href="#sample-datasets-for-the-pin-model"></a>
</h2>
<hr>
<p>The PIN model is an multilayer PIN model with a single information
layer. We can, therefore, use the function
<code><a href="../reference/generatedata_mpin.html">generatedata_mpin()</a></code>, in order to generate sample data for
the PIN model. Generically, this is done as follows:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/generatedata_mpin.html">generatedata_mpin</a></span><span class="op">(</span><span class="va">...</span>, layers<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<p>If the user would like to create a sample dataset for infrequently
traded stock, she can specify low values or ranges for the trade
intensity rates. For instance, let’s assume that the user suspects that
an infrequently-traded stock has an average of uninformed trading
intensity for buys and sells between <code>300</code> and
<code>500</code>. They generate a single sample dataset for this
scenario as follows:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pindata</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generatedata_mpin.html">generatedata_mpin</a></span><span class="op">(</span>layers<span class="op">=</span><span class="fl">1</span>, ranges <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>eps.b<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">300</span>, <span class="fl">500</span><span class="op">)</span>, eps.s<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">300</span>,<span class="fl">500</span><span class="op">)</span><span class="op">)</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p>The details of the generated sample dataset can be displayed with the
following code</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">show</span><span class="op">(</span><span class="va">pindata</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">## ----------------------------------</span></span>
<span><span class="co">## Data series successfully generated</span></span>
<span><span class="co">## ----------------------------------</span></span>
<span><span class="co">## Simulation model     : MPIN model</span></span>
<span><span class="co">## Number of layers : 1 layer(s)</span></span>
<span><span class="co">## Number of trading days   : 60 days</span></span>
<span><span class="co">## ----------------------------------</span></span>
<span><span class="co">## Type object@data to get the simulated data</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##  Data simulation  </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ===========  ==============  ============  =============</span></span>
<span><span class="co">## Variables    Theoretical.    Empirical.    Aggregates.  </span></span>
<span><span class="co">## ===========  ==============  ============  =============</span></span>
<span><span class="co">## alpha        0.521033        0.55          0.55         </span></span>
<span><span class="co">## delta        0.87382         0.818182      0.818182     </span></span>
<span><span class="co">## mu           188             182.66        182.66       </span></span>
<span><span class="co">## eps.b        309             309.43        309.43       </span></span>
<span><span class="co">## eps.s        316             320.03        320.03       </span></span>
<span><span class="co">## ----                                                    </span></span>
<span><span class="co">## Likelihood   -               (566.837)     (566.837)    </span></span>
<span><span class="co">## mpin         -               0.137633      0.137633     </span></span>
<span><span class="co">## ===========  ==============  ============  =============</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## -------</span></span>
<span><span class="co">## Running time: 0.009 seconds</span></span></code></pre>
<p>You access the sequences of buys, and sells through the slot
<code>@data</code> of the object <code>pindata</code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">show</span><span class="op">(</span><span class="va">pindata</span><span class="op">@</span><span class="va">data</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="op">]</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">##      b   s</span></span>
<span><span class="co">## 1  330 319</span></span>
<span><span class="co">## 2  314 328</span></span>
<span><span class="co">## 3  302 521</span></span>
<span><span class="co">## 4  326 330</span></span>
<span><span class="co">## 5  306 550</span></span>
<span><span class="co">## 6  300 513</span></span>
<span><span class="co">## 7  311 516</span></span>
<span><span class="co">## 8  345 336</span></span>
<span><span class="co">## 9  288 514</span></span>
<span><span class="co">## 10 289 512</span></span></code></pre>
<p>You can, now use the dataset object <code>pindata</code> to check the
accuracy of the different estimation functions. You can do that by
comparing the actual parameters of the sample datasets to the estimated
parameters of the estimation functions. Let us start with displaying the
actual parameters of the sample datasets. These can be accessed through
the slot <code>@empiricals</code> of the dataset object, which stores
the empirical parameters computed from the sequences of buys and sells
generated. Please refer to the documentation of
<code><a href="../reference/generatedata_mpin.html">generatedata_mpin()</a></code> for more information.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">actual</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="va">pindata</span><span class="op">@</span><span class="va">empiricals</span><span class="op">)</span></span>
<span><span class="fu">show</span><span class="op">(</span><span class="va">actual</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">##       alpha       delta          mu       eps.b       eps.s </span></span>
<span><span class="co">##   0.5500000   0.8181818 182.6553413 309.4259259 320.0303030</span></span></code></pre>
<p>Estimate the PIN model using the function <code><a href="../reference/pin_ea.html">pin_ea()</a></code>, and
display the estimated parameters</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pin_ea.html">pin_ea</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">pindata</span><span class="op">@</span><span class="va">data</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">estimates</span> <span class="op">&lt;-</span> <span class="va">model</span><span class="op">@</span><span class="va">parameters</span> </span>
<span><span class="fu">show</span><span class="op">(</span><span class="va">estimates</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">##       alpha       delta          mu       eps.b       eps.s </span></span>
<span><span class="co">##   0.5499986   0.8181807 182.4711699 309.2802602 320.2772272</span></span></code></pre>
<p>Now calculate the absolute errors of the estimation method.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">errors</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">actual</span> <span class="op">-</span> <span class="va">estimates</span><span class="op">)</span></span>
<span><span class="fu">show</span><span class="op">(</span><span class="va">errors</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">##        alpha        delta           mu        eps.b        eps.s </span></span>
<span><span class="co">## 1.371211e-06 1.123268e-06 1.841714e-01 1.456658e-01 2.469241e-01</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="sample-datasets-for-the-mpin-model">Sample datasets for the MPIN model<a class="anchor" aria-label="anchor" href="#sample-datasets-for-the-mpin-model"></a>
</h2>
<hr>
<p>In contrast to the PIN model, the number of information layers is
free. We can, therefore, use the function
<code><a href="../reference/generatedata_mpin.html">generatedata_mpin()</a></code> with the desired number of information
layers, in order to generate sample data for the MPIN model. We can also
skip specifying the number of layers, and the default setting will be
used: the number of layers will be randomly selected from the integer
set from <code>1</code> to <code>5</code>. Generically, this is done as
follows:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/generatedata_mpin.html">generatedata_mpin</a></span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span></code></pre></div>
<p>If the user would like to create a sample dataset for frequently
traded stock with two information layers, she can set the argument
layers to 2, and specify high values or ranges for the trade intensity
rates. For instance, let’s assume that the user suspects that a
frequently-traded stock has an average of uninformed trading intensity
for buys and sells between <code>12000</code> and <code>15000</code>.
They generate a single sample dataset for this scenario as follows:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mpindata</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generatedata_mpin.html">generatedata_mpin</a></span><span class="op">(</span>layers<span class="op">=</span><span class="fl">2</span>, ranges <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>eps.b<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">12000</span>, <span class="fl">15000</span><span class="op">)</span>, eps.s<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">12000</span>,<span class="fl">15000</span><span class="op">)</span><span class="op">)</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p>The details of the generated sample dataset can be displayed with the
following code</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">show</span><span class="op">(</span><span class="va">mpindata</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">## ----------------------------------</span></span>
<span><span class="co">## Data series successfully generated</span></span>
<span><span class="co">## ----------------------------------</span></span>
<span><span class="co">## Simulation model     : MPIN model</span></span>
<span><span class="co">## Number of layers : 2 layer(s)</span></span>
<span><span class="co">## Number of trading days   : 60 days</span></span>
<span><span class="co">## ----------------------------------</span></span>
<span><span class="co">## Type object@data to get the simulated data</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##  Data simulation  </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ===========  ==================  ==================  =============</span></span>
<span><span class="co">## Variables    Theoretical.        Empirical.          Aggregates.  </span></span>
<span><span class="co">## ===========  ==================  ==================  =============</span></span>
<span><span class="co">## alpha        0.149400, 0.354159  0.1, 0.4            0.5          </span></span>
<span><span class="co">## delta        0.242865, 0.306039  0.333333, 0.291667  0.3          </span></span>
<span><span class="co">## mu           1205, 2791          1210.53, 2782.72    2468.28      </span></span>
<span><span class="co">## eps.b        12303               12313.15            12313.15     </span></span>
<span><span class="co">## eps.s        14246               14244.59            14244.59     </span></span>
<span><span class="co">## ----                                                              </span></span>
<span><span class="co">## Likelihood   -                   (829.029)           (829.029)    </span></span>
<span><span class="co">## mpin         -                   0.044407            0.044407     </span></span>
<span><span class="co">## ===========  ==================  ==================  =============</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## -------</span></span>
<span><span class="co">## Running time: 0.004 seconds</span></span></code></pre>
<p>You access the sequences of buys, and sells through the slot
<code>@data</code> of the object <code>pindata</code>.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">show</span><span class="op">(</span><span class="va">mpindata</span><span class="op">@</span><span class="va">data</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="op">]</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">##        b     s</span></span>
<span><span class="co">## 1  12220 14377</span></span>
<span><span class="co">## 2  12274 14111</span></span>
<span><span class="co">## 3  12370 14170</span></span>
<span><span class="co">## 4  12420 14353</span></span>
<span><span class="co">## 5  12271 16992</span></span>
<span><span class="co">## 6  12117 17201</span></span>
<span><span class="co">## 7  12412 13976</span></span>
<span><span class="co">## 8  13319 14318</span></span>
<span><span class="co">## 9  12403 17202</span></span>
<span><span class="co">## 10 15279 14205</span></span></code></pre>
<p>You can, now use the dataset object <code>mpindata</code> to check
the accuracy of the different estimation functions, namely
<code><a href="../reference/mpin_ml.html">mpin_ml()</a></code>, and <code><a href="../reference/mpin_ecm.html">mpin_ecm()</a></code>. You can do that by
comparing the empirical PIN value derived from the sample dataset to the
estimated PIN value of the estimation functions. Let us start with
displaying the empirical PIN value obtained from the sample dataset.
This value can be accessed through the slot <code>@emp.pin</code> of the
dataset object, which stores the empirical PIN value computed from the
sequences of buys and sells generated. Please refer to the documentation
of <code><a href="../reference/generatedata_mpin.html">generatedata_mpin()</a></code> for more information.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">actualmpin</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="va">mpindata</span><span class="op">@</span><span class="va">emp.pin</span><span class="op">)</span></span>
<span><span class="fu">show</span><span class="op">(</span><span class="va">actualmpin</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">##       MPIN </span></span>
<span><span class="co">## 0.04440654</span></span></code></pre>
<p>Estimate the MPIN model using the functions <code><a href="../reference/mpin_ml.html">mpin_ml()</a></code>,
and <code>mpin_ecm</code>, and display the estimated MPIN values.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model_ml</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mpin_ml.html">mpin_ml</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">mpindata</span><span class="op">@</span><span class="va">data</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">model_ecm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mpin_ecm.html">mpin_ecm</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">mpindata</span><span class="op">@</span><span class="va">data</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">mlmpin</span> <span class="op">&lt;-</span> <span class="va">model_ml</span><span class="op">@</span><span class="va">mpin</span></span>
<span><span class="va">ecmpin</span> <span class="op">&lt;-</span> <span class="va">model_ecm</span><span class="op">@</span><span class="va">mpin</span></span>
<span><span class="va">estimates</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/setNames.html" class="external-link">setNames</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">mlmpin</span>, <span class="va">ecmpin</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ML"</span>, <span class="st">"ECM"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">show</span><span class="op">(</span><span class="va">estimates</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">##         ML        ECM </span></span>
<span><span class="co">## 0.04441421 0.04441251</span></span></code></pre>
<p>Now calculate the absolute errors of both estimation methods.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">errors</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">actualmpin</span> <span class="op">-</span> <span class="va">estimates</span><span class="op">)</span></span>
<span><span class="fu">show</span><span class="op">(</span><span class="va">errors</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">##           ML          ECM </span></span>
<span><span class="co">## 7.678822e-06 5.979512e-06</span></span></code></pre>
<p>The function <code><a href="../reference/generatedata_mpin.html">generatedata_mpin()</a></code> can generate a
<code>data.series</code> object that contains a collection of
<code>dataset</code> objects. For instance, the user can generate a
collection of 10 datasets, whose data sequences span 60 days, and
contain 3 layers, and use it to check the accuracy of the MPIN
estimation.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">size</span> <span class="op">&lt;-</span> <span class="fl">10</span></span>
<span><span class="va">collection</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generatedata_mpin.html">generatedata_mpin</a></span><span class="op">(</span>series <span class="op">=</span> <span class="va">size</span>, layers <span class="op">=</span> <span class="fl">3</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu">show</span><span class="op">(</span><span class="va">collection</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">## ----------------------------------</span></span>
<span><span class="co">## Simulated data successfully generated</span></span>
<span><span class="co">## ----------------------------------</span></span>
<span><span class="co">## Simulation model     : MPIN model</span></span>
<span><span class="co">## Number of layers : 3 layer(s)</span></span>
<span><span class="co">## Number of datasets   : 10 datasets</span></span>
<span><span class="co">## Number of trading days   : 60 days</span></span>
<span><span class="co">## ----------------------------------</span></span>
<span><span class="co">## Type object@datasets to access the list of dataset objects</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##  Data simulation   </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## -------</span></span>
<span><span class="co">## Running time: 0.046 seconds</span></span></code></pre>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">accuracy</span> <span class="op">&lt;-</span> <span class="va">devmpin</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="va">size</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">sdata</span> <span class="op">&lt;-</span> <span class="va">collection</span><span class="op">@</span><span class="va">datasets</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span></span>
<span>    <span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mpin_ml.html">mpin_ml</a></span><span class="op">(</span><span class="va">sdata</span><span class="op">@</span><span class="va">data</span>, xtraclusters <span class="op">=</span> <span class="fl">3</span>, verbose<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span>
<span>    <span class="va">accuracy</span> <span class="op">&lt;-</span> <span class="va">accuracy</span> <span class="op">+</span> <span class="op">(</span><span class="va">sdata</span><span class="op">@</span><span class="va">layers</span> <span class="op">==</span> <span class="va">model</span><span class="op">@</span><span class="va">layers</span><span class="op">)</span></span>
<span>    <span class="va">devmpin</span> <span class="op">&lt;-</span> <span class="va">devmpin</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">sdata</span><span class="op">@</span><span class="va">emp.pin</span> <span class="op">-</span> <span class="va">model</span><span class="op">@</span><span class="va">mpin</span><span class="op">)</span></span>
<span>    </span>
<span><span class="op">}</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">'The accuracy of layer detection: '</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">accuracy</span><span class="op">*</span><span class="op">(</span><span class="fl">100</span><span class="op">/</span><span class="va">size</span><span class="op">)</span>,<span class="st">"%.\n"</span><span class="op">)</span>, sep<span class="op">=</span><span class="st">""</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">## The accuracy of layer detection: 90%.</span></span></code></pre>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">'The average error in MPIN estimates: '</span>, <span class="va">devmpin</span><span class="op">/</span><span class="va">size</span>, <span class="st">".\n"</span>, sep<span class="op">=</span><span class="st">""</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">## The average error in MPIN estimates: 0.002967901.</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="sample-datasets-for-the-adjpin-model">Sample datasets for the ADJPIN model<a class="anchor" aria-label="anchor" href="#sample-datasets-for-the-adjpin-model"></a>
</h2>
<hr>
<p>The AdjPIN model is an extension of the PIN model that includes the
possibility of liquidity shocks. To obtain a sample dataset distributed
according to the assumptions of the AdjPIN model, users can use the
function <code><a href="../reference/generatedata_adjpin.html">generatedata_adjpin()</a></code>. Generically, this is done
as follows:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/generatedata_adjpin.html">generatedata_adjpin</a></span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span></code></pre></div>
<p>If the user desires to create 10 sample datasets for frequently
traded stock, they can specify high values or ranges for the trade
intensity rates. For instance, let’s assume that the user suspects that
a frequently-traded stock has an average of uninformed trading intensity
for buys and sells between <code>10000</code> and
<code>15000</code>.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">adjpindatasets</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generatedata_adjpin.html">generatedata_adjpin</a></span><span class="op">(</span>series <span class="op">=</span> <span class="fl">10</span>, ranges <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>eps.b<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10000</span>, <span class="fl">15000</span><span class="op">)</span>, eps.s<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10000</span>,<span class="fl">15000</span><span class="op">)</span><span class="op">)</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p>The details of the generated sample data series can be displayed with
the following code:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">show</span><span class="op">(</span><span class="va">adjpindatasets</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">## ----------------------------------</span></span>
<span><span class="co">## Simulated data successfully generated</span></span>
<span><span class="co">## ----------------------------------</span></span>
<span><span class="co">## Simulation model     : AdjPIN model</span></span>
<span><span class="co">## Model Restrictions   : Unrestricted model</span></span>
<span><span class="co">## Number of datasets   : 10 datasets</span></span>
<span><span class="co">## Number of trading days   : 60 days</span></span>
<span><span class="co">## ----------------------------------</span></span>
<span><span class="co">## Type object@datasets to access the list of dataset objects</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##  Data simulation   </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## -------</span></span>
<span><span class="co">## Running time: 0.129 seconds</span></span></code></pre>
<p>You access the first dataset from <code>adjpindata</code> using this
code:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">adjpindata</span> <span class="op">&lt;-</span> <span class="va">adjpindatasets</span><span class="op">@</span><span class="va">datasets</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="fu">show</span><span class="op">(</span><span class="va">adjpindata</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">## ----------------------------------</span></span>
<span><span class="co">## Data series successfully generated</span></span>
<span><span class="co">## ----------------------------------</span></span>
<span><span class="co">## Simulation model     : AdjPIN model</span></span>
<span><span class="co">## Model Restrictions   : Unrestricted model</span></span>
<span><span class="co">## Number of trading days   : 60 days</span></span>
<span><span class="co">## ----------------------------------</span></span>
<span><span class="co">## Type object@data to get the simulated data</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##  Data simulation  </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ===========  ==============  ============</span></span>
<span><span class="co">## Variables    Theoretical.    Empirical.  </span></span>
<span><span class="co">## ===========  ==============  ============</span></span>
<span><span class="co">## alpha        0.027422        0.066667    </span></span>
<span><span class="co">## delta        0.136443        0.25        </span></span>
<span><span class="co">## theta        0.853278        0.821429    </span></span>
<span><span class="co">## theta'       0.578803        0.5         </span></span>
<span><span class="co">## ----                                     </span></span>
<span><span class="co">## eps.b        13382           13390.9     </span></span>
<span><span class="co">## eps.s        12972           13045.5     </span></span>
<span><span class="co">## mu.b         28791           28474.69    </span></span>
<span><span class="co">## mu.s         25923           25637.76    </span></span>
<span><span class="co">## d.b          49433           49268.41    </span></span>
<span><span class="co">## d.s          40706           40708.74    </span></span>
<span><span class="co">## ----                                     </span></span>
<span><span class="co">## Likelihood                   (874.727)   </span></span>
<span><span class="co">## adjPIN       0.008           0.018       </span></span>
<span><span class="co">## PSOS         0.738           0.718       </span></span>
<span><span class="co">## ===========  ==============  ============</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## -------</span></span>
<span><span class="co">## Running time: 0.011 seconds</span></span></code></pre>
<p>You can, now use the dataset object <code>adjpindata</code> to check
the accuracy of the different estimation functions, namely MLE, and ECM
algorithms. You can do that by comparing the empirical adjpin, and psos
values derived from the sample dataset to the estimated adjpin, and psos
values obtained from the estimation functions. Let us start with
displaying the empirical adjpin, and psos values obtained from the
sample dataset. These values can be accessed through the slot
<code>@emp.pin</code> of the dataset object, which stores the empirical
adjpin/psos value computed from the sequences of buys and sells
generated. Please refer to the documentation of
<code><a href="../reference/generatedata_adjpin.html">generatedata_adjpin()</a></code> for more information.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">actualpins</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="va">adjpindata</span><span class="op">@</span><span class="va">emp.pin</span><span class="op">)</span></span>
<span><span class="fu">show</span><span class="op">(</span><span class="va">actualpins</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">##     adjpin       psos </span></span>
<span><span class="co">## 0.01846062 0.71788502</span></span></code></pre>
<p>Estimate the AdjPIN model using <code>adjpin(method="ML")</code>, and
<code>adjpin(method="ECM"</code>, and display the estimated adjpin/psos
values.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model_ml</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/adjpin.html">adjpin</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">adjpindata</span><span class="op">@</span><span class="va">data</span>, method <span class="op">=</span> <span class="st">"ML"</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">model_ecm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/adjpin.html">adjpin</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">adjpindata</span><span class="op">@</span><span class="va">data</span>, method <span class="op">=</span> <span class="st">"ECM"</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">mlpins</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">model_ml</span><span class="op">@</span><span class="va">adjpin</span>, <span class="va">model_ml</span><span class="op">@</span><span class="va">psos</span><span class="op">)</span></span>
<span><span class="va">ecmpins</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">model_ecm</span><span class="op">@</span><span class="va">adjpin</span>, <span class="va">model_ecm</span><span class="op">@</span><span class="va">psos</span><span class="op">)</span></span>
<span><span class="va">estimates</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">mlpins</span>, <span class="va">ecmpins</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">estimates</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"adjpin"</span>, <span class="st">"psos"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">estimates</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ML"</span>, <span class="st">"ECM"</span><span class="op">)</span></span>
<span><span class="fu">show</span><span class="op">(</span><span class="va">estimates</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">##         adjpin      psos</span></span>
<span><span class="co">## ML  0.01861326 0.7186737</span></span>
<span><span class="co">## ECM 0.01860432 0.7186234</span></span></code></pre>
<p>Now calculate the absolute errors of both estimation methods.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">errors</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">estimates</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">actualpins</span>, <span class="va">actualpins</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">show</span><span class="op">(</span><span class="va">errors</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">##           adjpin         psos</span></span>
<span><span class="co">## ML  0.0001526473 0.0007886836</span></span>
<span><span class="co">## ECM 0.0001436999 0.0007383921</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="getting-help">Getting help<a class="anchor" aria-label="anchor" href="#getting-help"></a>
</h2>
<hr>
<p>If you encounter a clear bug, please file an issue with a minimal
reproducible example on <a href="https://github.com/monty-se/PINstimation/issues" class="external-link">GitHub</a>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="package-authors.html">Montasser Ghachem</a>,
<a href="package-authors.html">Oguz Ersan</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a>
2.0.2.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
